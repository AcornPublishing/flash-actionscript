<html xmlns:v="urn:schemas-microsoft-com:vml"xmlns:o="urn:schemas-microsoft-com:office:office"xmlns:w="urn:schemas-microsoft-com:office:word"xmlns="http://www.w3.org/TR/REC-html40"><head><meta http-equiv=Content-Type content="text/html; charset=windows-1252"><meta name=ProgId content=Word.Document><meta name=Generator content="Microsoft Word 9"><meta name=Originator content="Microsoft Word 9"><link rel=File-List href="./this_files/filelist.xml"><link rel=Edit-Time-Data href="./this_files/editdata.mso"><!--[if !mso]><style>v\:* {behavior:url(#default#VML);}o\:* {behavior:url(#default#VML);}w\:* {behavior:url(#default#VML);}.shape {behavior:url(#default#VML);}</style><![endif]--><!--[if gte mso 9]><xml> <o:DocumentProperties>  <o:Author>Phillip D Jackson</o:Author>  <o:LastAuthor>Phillip D Jackson</o:LastAuthor>  <o:Revision>2</o:Revision>  <o:TotalTime>2</o:TotalTime>  <o:Created>2002-08-06T13:48:00Z</o:Created>  <o:LastSaved>2002-08-06T13:50:00Z</o:LastSaved>  <o:Pages>13</o:Pages>  <o:Words>3056</o:Words>  <o:Characters>17424</o:Characters>  <o:Company>Wrox Press Ltd</o:Company>  <o:Lines>145</o:Lines>  <o:Paragraphs>34</o:Paragraphs>  <o:CharactersWithSpaces>21397</o:CharactersWithSpaces>  <o:Version>9.2720</o:Version> </o:DocumentProperties></xml><![endif]--><!--[if gte mso 9]><xml> <w:WordDocument>  <w:Zoom>120</w:Zoom> </w:WordDocument></xml><![endif]--><style><!-- /* Font Definitions */@font-face	{font-family:Helvetica;	panose-1:2 11 6 4 2 2 2 2 2 4;	mso-font-charset:0;	mso-generic-font-family:swiss;	mso-font-format:other;	mso-font-pitch:variable;	mso-font-signature:3 0 0 0 1 0;}@font-face	{font-family:Courier;	panose-1:0 0 0 0 0 0 0 0 0 0;	mso-font-charset:0;	mso-generic-font-family:modern;	mso-font-format:other;	mso-font-pitch:fixed;	mso-font-signature:3 0 0 0 1 0;}@font-face	{font-family:Optima;	mso-font-alt:"Courier New";	mso-font-charset:0;	mso-generic-font-family:auto;	mso-font-pitch:variable;	mso-font-signature:50331648 0 0 0 1 0;} /* Style Definitions */p.MsoNormal, li.MsoNormal, div.MsoNormal	{mso-style-parent:"";	margin:0cm;	margin-bottom:.0001pt;	mso-pagination:widow-orphan;	font-size:12.0pt;	font-family:"Times New Roman";	mso-fareast-font-family:"Times New Roman";}p.MsoBodyText, li.MsoBodyText, div.MsoBodyText	{font-size:12.0pt;	font-family:"Times New Roman";	mso-fareast-font-family:"Times New Roman";}p.bullet-level1, li.bullet-level1, div.bullet-level1	{mso-style-name:bullet-level1;	font-size:12.0pt;	font-family:"Times New Roman";	mso-fareast-font-family:"Times New Roman";}p.filename, li.filename, div.filename	{mso-style-name:filename;	font-size:12.0pt;	font-family:"Times New Roman";	mso-fareast-font-family:"Times New Roman";}@page Section1	{size:595.3pt 841.9pt;	margin:72.0pt 90.0pt 72.0pt 90.0pt;	mso-header-margin:35.4pt;	mso-footer-margin:35.4pt;	mso-paper-source:0;}div.Section1	{page:Section1;}--></style></head><body lang=EN-GB link=blue vlink=blue style='tab-interval:36.0pt'><div class=Section1><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"><link rel="stylesheet" href="desref.css" type="text/css"><h1><a name="_Toc16343113">this</a></h1><p class=MsoBodyText><span class=code><span style='font-family:Courier'>this</span></span></p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText><span class=code>Compatible with </span><spanclass=importantword><span style='font-family:Helvetica'>Flash Player 5 andlater</span></span><span class=code>. </span></p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText>The <span class=code><span style='font-family:Courier'>this</span></span>keyword refers to the object containing the method or script.</p><h3>Description</h3><p class=MsoBodyText>The <span class=code><span style='font-family:Courier'>this</span></span><span class=importantword><span style='font-family:Helvetica'>keyword</span></span>is used to indicate which object or movie clip you are referring to whenreferencing methods, properties, or event handlers. When inside a movie clipusing the <span class=code><span style='font-family:Courier'>this</span></span>keyword in the script, it references the movie clip. When called from an objector instance, the <span class=code><span style='font-family:Courier'>this</span></span>keyword refers to that calling entity. When called inside an event handler, the<span class=code><span style='font-family:Courier'>this</span></span> keywordrefers to the timeline, or the movie clip in which the event handler istargeted at. In all cases, <span class=code><span style='font-family:Courier'>this</span></span>refers to the <i>scope </i>of the current script.</p><p class=MsoBodyText>&nbsp;</p><table border=0 cellspacing=0 cellpadding=0 style='margin-left:14.2pt; border-collapse:collapse;mso-padding-alt:0cm 0cm 0cm 0cm'> <tr>  <td width=204 valign=top style='width:153.2pt;border-top:solid windowtext .5pt;  border-left:none;border-bottom:solid windowtext .5pt;border-right:none;  padding:0cm 5.4pt 0cm 5.4pt'>  <p class=MsoBodyText><span class=importantword><span style='font-family:Helvetica'>&nbsp;</span></span></p>  <p class=MsoBodyText><span class=importantword><span style='font-family:Helvetica'>Code</span></span></p>  <p class=MsoBodyText>&nbsp;</p>  </td>  <td width=184 valign=top style='width:137.7pt;border-top:solid windowtext .5pt;  border-left:none;border-bottom:solid windowtext .5pt;border-right:none;  padding:0cm 5.4pt 0cm 5.4pt'>  <p class=MsoBodyText><span class=importantword><span style='font-family:Helvetica'>&nbsp;</span></span></p>  <p class=MsoBodyText><span class=importantword><span style='font-family:Helvetica'>Additional  Explanation</span></span></p>  <p class=MsoBodyText>&nbsp;</p>  </td>  <td width=184 valign=top style='width:137.7pt;border-top:solid windowtext .5pt;  border-left:none;border-bottom:solid windowtext .5pt;border-right:none;  padding:0cm 5.4pt 0cm 5.4pt'>  <p class=MsoBodyText><span class=importantword><span style='font-family:Helvetica'>&nbsp;</span></span></p>  <p class=MsoBodyText><span class=importantword><span style='font-family:Helvetica'>Notes</span></span></p>  </td> </tr> <tr>  <td width=204 valign=top style='width:153.2pt;border:none;border-bottom:solid windowtext .5pt;  padding:0cm 5.4pt 0cm 5.4pt'>  <p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;</span></span></p>  <p class=MsoBodyText><span class=code><span style='font-family:Courier'>this.size  = 10;</span></span></p>  <p class=MsoBodyText>&nbsp;</p>  </td>  <td width=184 valign=top style='width:137.7pt;border:none;border-bottom:solid windowtext .5pt;  padding:0cm 5.4pt 0cm 5.4pt'>  <p class=MsoBodyText>&nbsp;</p>  <p class=MsoBodyText>Refers to the object that is the current scope of the  script&nbsp; </p>  <p class=MsoBodyText>&nbsp;</p>  <p class=MsoBodyText>&nbsp;</p>  <p class=MsoBodyText>&nbsp;</p>  </td>  <td width=184 valign=top style='width:137.7pt;border:none;border-bottom:solid windowtext .5pt;  padding:0cm 5.4pt 0cm 5.4pt'>  <p class=MsoBodyText><span class=code>&nbsp;</span></p>  <p class=MsoBodyText>When called inside an event handler or attached to a  frame, <span class=code><span style='font-family:Courier'>this</span></span> refers  to the timeline. When called from an object, <span class=code><span  style='font-family:Courier'>this</span></span> refers to the object.</p>  <p class=MsoBodyText>&nbsp;</p>  </td> </tr> <tr>  <td width=204 valign=top style='width:153.2pt;border:none;border-bottom:solid windowtext .5pt;  padding:0cm 5.4pt 0cm 5.4pt'>  <p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;</span></span></p>  <p class=MsoBodyText><span class=code><span style='font-family:Courier'>person  = new Object();</span></span></p>  <p class=MsoBodyText><span class=code><span style='font-family:Courier'>person.init  = function () {</span></span></p>  <p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;</span></span></p>  <p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;&nbsp;&nbsp;  this.firstName = &quot;John&quot;;</span></span></p>  <p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;&nbsp;&nbsp;  this.lastName = &quot;Doe&quot;;</span></span></p>  <p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;&nbsp;&nbsp;  this.age = 21;</span></span></p>  <p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;</span></span></p>  <p class=MsoBodyText><span class=code><span style='font-family:Courier'>}</span></span></p>  <p class=MsoBodyText><span class=code><span style='font-family:Courier'>person.init();</span></span></p>  </td>  <td width=184 valign=top style='width:137.7pt;border:none;border-bottom:solid windowtext .5pt;  padding:0cm 5.4pt 0cm 5.4pt'>  <p class=MsoBodyText>&nbsp;</p>  <p class=MsoBodyText>This piece of code, defines an object. The <span  class=code><span style='font-family:Courier'>init</span></span> method of the  <span class=code><span style='font-family:Courier'>person</span></span>  object is also defined. When the <span class=code><span style='font-family:  Courier'>init</span></span> function is called, the object will contain the  following properties, <span class=code><span style='font-family:Courier'>firstName</span></span>,  <span class=code><span style='font-family:Courier'>lastName</span></span> and  <span class=code><span style='font-family:Courier'>age</span></span>.</p>  </td>  <td width=184 valign=top style='width:137.7pt;border:none;border-bottom:solid windowtext .5pt;  padding:0cm 5.4pt 0cm 5.4pt'>  <p class=MsoBodyText><span class=code>&nbsp;</span></p>  <p class=MsoBodyText><span class=code>In this example, </span><span  class=code><span style='font-family:Courier'>this</span> refers to the  object, </span><span class=code><span style='font-family:Courier'>person</span>.</span></p>  </td> </tr> <tr>  <td width=204 valign=top style='width:153.2pt;border:none;border-bottom:solid windowtext .5pt;  padding:0cm 5.4pt 0cm 5.4pt'>  <p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;</span></span></p>  <p class=MsoBodyText><span class=code><span style='font-family:Courier'>onClipEvent(enterFrame)  {</span></span></p>  <p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;&nbsp;&nbsp;  this._x++;</span></span></p>  <p class=MsoBodyText><span class=code><span style='font-family:Courier'>}</span></span></p>  <p class=MsoBodyText>&nbsp;</p>  </td>  <td width=184 valign=top style='width:137.7pt;border:none;border-bottom:solid windowtext .5pt;  padding:0cm 5.4pt 0cm 5.4pt'>  <p class=MsoBodyText>&nbsp;</p>  <p class=MsoBodyText>This code will increment the <span class=code><span  style='font-family:Courier'>x</span></span> position of the movie clip by <span  class=code><span style='font-family:Courier'>1</span></span>.</p>  </td>  <td width=184 valign=top style='width:137.7pt;border:none;border-bottom:solid windowtext .5pt;  padding:0cm 5.4pt 0cm 5.4pt'>  <p class=MsoBodyText><span class=code>&nbsp;</span></p>  <p class=MsoBodyText><span class=code>In this example, </span><span  class=code><span style='font-family:Courier'>this</span> refers to the movie  clip in which this code resides.</span></p>  </td> </tr></table><h3>Examples and practical uses</h3><p class=MsoBodyText><span class=code><span style='font-family:Courier'>this</span></span>can mean a number of different things, depending on what you are doing. Thereare two general ways you can use this, and they are:</p><p class=MsoBodyText>&nbsp;</p><p class=bullet-level1><span lang=EN-US style='font-family:Symbol;mso-ansi-language:EN-US'>·</span><span lang=EN-US style='font-size:7.0pt;mso-ansi-language:EN-US'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span lang=EN-US style='mso-ansi-language:EN-US'>When you are using thisas a general path (the simpler usage).</span></p><p class=bullet-level1><span lang=EN-US style='font-family:Symbol;mso-ansi-language:EN-US'>·</span><span lang=EN-US style='font-size:7.0pt;mso-ansi-language:EN-US'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span lang=EN-US style='mso-ansi-language:EN-US'>When you are using thisas a general reference to an object (the advanced usage).</span></p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText>We will look at the two separately, because most readersviewing this entry will be looking at an understanding of one or the other.</p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText>You should also note that this entry is longer than mostbecause an understanding of &quot;<span class=code><span style='font-family:Courier'>this</span></span>&quot; is crucial to a number of important softwareconcepts in Flash, and these include:</p><p class=MsoBodyText style='margin-left:50.2pt;text-indent:-18.0pt'><spanstyle='font-family:Symbol'>·</span><span style='font-size:7.0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>Writing general event handlers.</p><p class=MsoBodyText style='margin-left:50.2pt;text-indent:-18.0pt'><spanstyle='font-family:Symbol'>·</span><span style='font-size:7.0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>Understanding and using the new method based Flash 6 event model.</p><p class=MsoBodyText style='margin-left:50.2pt;text-indent:-18.0pt'><spanstyle='font-family:Symbol'>·</span><span style='font-size:7.0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>Writing modular code via truly general and timeline independent (i.e. <i>relocatable</i>)functions.</p><p class=MsoBodyText style='margin-left:50.2pt;text-indent:-18.0pt'><spanstyle='font-family:Symbol'>·</span><span style='font-size:7.0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>Treating functions as objects (this is really an important sub-point ofthe &quot;writing modular code&quot; bullet point.</p><p class=MsoBodyText style='margin-left:50.2pt;text-indent:-18.0pt'><spanstyle='font-family:Symbol'>·</span><span style='font-size:7.0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>Writing object constructor functions.</p><p class=MsoBodyText style='margin-left:50.2pt;text-indent:-18.0pt'><spanstyle='font-family:Symbol'>·</span><span style='font-size:7.0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>Writing prototype definitions when creating general object definitions.</p><p class=MsoBodyText style='margin-left:50.2pt;text-indent:-18.0pt'><spanstyle='font-family:Symbol'>·</span><span style='font-size:7.0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>Finally, a good understanding of the points listed above is whatdifferentiates an intermediate Flash coder from an advanced one, so we need tospend some time on this!</p><h3>Using this as a general timeline path</h3><p class=MsoBodyText>What <span class=code><span style='font-family:Courier'>this</span></span>is when considering paths is always the same thing; <span class=importantword><spanstyle='font-family:Helvetica'>the scope of the code that is currently running</span></span>.That's fine for advanced coders, who know all about scope, but not much use tomany other people. In general, the scope of a block of code always means&quot;where the code is&quot; in Flash 5, and the same thing in Flash 6 <i>except</i>when it is in a function that is being used as an event handler. </p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText>As this is such a crucial concept for the beginner, wehave included examples of all the common ways this can be used by thebeginner/intermediate coder. Those who understood the description above maywant to skip these examples.</p><h4><span lang=EN-US style='mso-ansi-language:EN-US'>Flash 4</span></h4><p class=MsoBodyText>In the simplest case, <span class=code><spanstyle='font-family:Courier'>this</span></span> is a general path to the currentscript. By &quot;simplest case&quot; we mean that none of the other examplesbelow this one also apply; the line of code is on a keyframe, and is not partof a function or event handler.</p><p class=MsoBodyText>For example, if you have the following line of code:</p><p class=MsoBodyText style='margin-left:53.25pt'>&nbsp;</p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>this._x=this._x+10;</span></span></p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText>If the code was on a frame of a movie clip called <spanclass=code><span style='font-family:Courier'>_root.myClip</span></span><i>, </i>thenthe code will be executed as:</p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>_root.myClip._x= _root.myClip._x+10;</span></span></p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText>This code can also be shortened as follows:</p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>_x =_x+10;</span></span></p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText>Why? Well, in the absence of any other information, Flashwill assume the scope of the current script. In this case, &quot;scope&quot; isjust a fancy way of saying &quot;the timeline that the code is on&quot;. That'sthe same place as <span class=code><span style='font-family:Courier'>this</span></span>,so it <i>doesn't matter if you omit </i><span class=code><spanstyle='font-family:Courier'>this</span></span><i>, because it is assumed as thedefault anyway.</i></p><p class=MsoBodyText><i>&nbsp;</i></p><p class=MsoBodyText>This sort of code is the Flash 4 style of coding (framebased) as migrated to Flash 5. It is less often used today, because Flash 5 andlater allow you to use event driven code. We will look at the Flash 5 versionof event driven code (which we will see is actually no different from what we havejust seen) before moving on to the slightly more complicated Flash 6 eventmodel, and the implications it has on <span class=code><span style='font-family:Courier'>this</span></span> and scope.</p><h4><span lang=EN-US style='mso-ansi-language:EN-US'>Flash 5</span></h4><p class=MsoBodyText style='margin-left:17.25pt'>When using <span class=code><spanstyle='font-family:Courier'>on(event)</span></span> and <span class=code><spanstyle='font-family:Courier'>onClipEvent(event)</span></span> scripts, <spanclass=code><span style='font-family:Courier'>this</span></span> refers to themovie clip it is attached to (or in the case of a button, the timeline thebutton is on, because buttons do not have timelines).</p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText style='margin-left:17.25pt'>Consider the script below:</p><p class=MsoBodyText style='margin-left:17.25pt'>&nbsp;</p><p class=MsoBodyText style='margin-left:17.25pt'><span class=code><spanstyle='font-family:Courier'>onClipEvent (load) {</span></span></p><p class=MsoBodyText style='margin-left:17.25pt'><span class=code><spanstyle='font-family:Courier'>&nbsp;&nbsp; this.count = 0;</span></span></p><p class=MsoBodyText style='margin-left:17.25pt'><span class=code><spanstyle='font-family:Courier'>}</span></span></p><p class=MsoBodyText style='margin-left:17.25pt'><span class=code><spanstyle='font-family:Courier'>onClipEvent (mouseDown) {</span></span></p><p class=MsoBodyText style='margin-left:17.25pt'><span class=code><spanstyle='font-family:Courier'>&nbsp;&nbsp; this.count = this.count+1;</span></span></p><p class=MsoBodyText style='margin-left:17.25pt'><span class=code><spanstyle='font-family:Courier'>&nbsp;&nbsp; message = &quot;number of clicks:&quot;+this.count;</span></span></p><p class=MsoBodyText style='margin-left:17.25pt'><span class=code><spanstyle='font-family:Courier'>&nbsp;&nbsp; trace(message);</span></span></p><p class=MsoBodyText style='margin-left:17.25pt'><span class=code><spanstyle='font-family:Courier'>}</span></span></p><p class=MsoBodyText style='margin-left:17.25pt'>&nbsp;</p><p class=MsoBodyText style='margin-left:17.25pt'>When attached to a movie clip,the action of this script will be:</p><p class=MsoBodyText style='margin-left:17.25pt'>&nbsp;</p><p class=bullet-level1><span lang=EN-US style='font-family:Symbol;mso-ansi-language:EN-US'>·</span><span lang=EN-US style='font-size:7.0pt;mso-ansi-language:EN-US'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span lang=EN-US style='mso-ansi-language:EN-US'>When the movie clip isfirst seen on the timeline, a variable called </span><span class=code><spanlang=EN-US style='font-family:Courier;mso-ansi-language:EN-US'>count</span></span><spanlang=EN-US style='mso-ansi-language:EN-US'> is initialized to zero. This occursvia the load clip event (lines 1-3).</span></p><p class=bullet-level1><span lang=EN-US style='font-family:Symbol;mso-ansi-language:EN-US'>·</span><span lang=EN-US style='font-size:7.0pt;mso-ansi-language:EN-US'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span lang=EN-US style='mso-ansi-language:EN-US'>Every time the mouse isclicked on the stage, </span><span class=code><span lang=EN-USstyle='font-family:Courier;mso-ansi-language:EN-US'>count</span></span><spanlang=EN-US style='mso-ansi-language:EN-US'> is incremented, and the resultprinted in the </span><span class=screentext><span lang=EN-US style='font-family:Optima;mso-ansi-language:EN-US'>Output</span></span><span lang=EN-USstyle='mso-ansi-language:EN-US'> window. This occurs via the </span><spanclass=code><span lang=EN-US style='font-family:Courier;mso-ansi-language:EN-US'>mouseDown</span></span><spanlang=EN-US style='mso-ansi-language:EN-US'> event (lines 4 to end).<br><br>    <img width=226 height=122 id="_x0000_i1025" src="../png/0586_dict11e_01.png"></span></p><p class=MsoBodyText>Although this is an exercise in the trivial, it does showup some important points:</p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText style='margin-left:36.0pt;text-indent:-18.0pt'><spanstyle='font-family:Symbol'>·</span><span style='font-size:7.0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>The variable <span class=code><span style='font-family:Courier'>count</span></span>is created on the timeline of the movie clip. You can check this by using thedebugger:<br><br>    <img width=223 height=183 id="_x0000_i1026" src="../png/0586_dict11e_02.png"></p><p class=MsoBodyText style='margin-left:18.0pt'>&nbsp;</p><p class=MsoBodyText style='margin-left:36.0pt;text-indent:-18.0pt'><spanstyle='font-family:Symbol'>·</span><span style='font-size:7.0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>The variable <span class=code><span style='font-family:Courier'>count</span></span>appears on the timeline of the movie clip only, and not on <span class=code><spanstyle='font-family:Courier'>_root</span></span> or any other timeline.</p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText>This is just another case of the Flash 4 style and nothinghas really changed (apart from the fact that we are now using events); <spanclass=code><span style='font-family:Courier'>this</span></span> and thetimeline that the script is on are still the same place, so you can even omitall the &quot;<span class=code><span style='font-family:Courier'>this</span></span>&quot;text from the listing and it will still do the same thing.</p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText>The first two examples are describing the normal cases inFlash 4/5. Flash 6 is slightly more complicated, because <i>the place whereyour script is, and its scope (and therefore </i><span class=code><spanstyle='font-family:Courier'>this</span></span><i>) can be different. </i>Althoughit is entirely possible to continue coding in Flash 6 using the Flash 5 way ofdoing things (and many people do because you can carry on with a simplisticmodel of scope that goes &quot;<span class=code><span style='font-family:Courier'>this</span></span>= scope = the timeline the currently running code is on&quot;), you miss out onthe richness and flexibility of the new Flash 6 coding style.</p><h4><span lang=EN-US style='mso-ansi-language:EN-US'>Flash 6</span></h4><p class=MsoBodyText>Flash 6 allows you to continue using Flash 5 events (<spanclass=code><span style='font-family:Courier'>on</span></span> and <spanclass=code><span style='font-family:Courier'>onClipEvent</span></span>) butalso allows you to create event handlers that are references to functions. TheFlash 5 example above can be written as follows in Flash 6 (assuming the movieclip is called <span class=code><span style='font-family:Courier'>myClip</span></span>):</p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>myClip.count= 0;</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>myClip.onMouseDown= function() {</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;&nbsp;this.count = this.count+1;</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;&nbsp;message = &quot;number of clicks: &quot;+this.count;</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;&nbsp;trace(message);</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>};</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;</span></span></p><p class=MsoBodyText>or...</p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>functionclickCount() {</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;&nbsp;this.count = this.count+1;</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;&nbsp;message = &quot;number of clicks: &quot;+this.count;</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;&nbsp;trace(message);</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>}</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>myClip.count= 0;</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>myClip.onMouseDown= clickCount;</span></span></p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText>Now, here's the important point; the code above will beplaced on the <span class=code><span style='font-family:Courier'>_root</span></span>timeline <i>and not on the timeline of the movie clip. </i>This is different tothe Flash 4 and Flash 5 examples, where the code location and its scope werethe same. This sameness has led many Flash 5 coders to believe that the scopeand the code location are the same thing. <i>This is not true, it's just thatit works out that way in Flash 5</i>. It is not always the case in Flash 6anymore, and <i>never </i>the case when you write code in the new Flash 6 styleshown above.</p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText>The fundamental change that all this makes is that forFlash 6, you must now be careful whether you leave <span class=code><spanstyle='font-family:Courier'>this</span></span> in your code or omit it. <spanclass=importantword><span style='font-family:Helvetica'>If you omit </span></span><spanclass=code><span style='font-family:Courier'>this</span></span><spanclass=importantword><span style='font-family:Helvetica'>, you will get adifferent result</span></span>.</p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText>You can see this at work by running either of the twoFlash 6 scripts above. If you omit <span class=code><span style='font-family:Courier'>this</span></span>, the variable <i>count </i>will be created ontimeline <span class=code><span style='font-family:Courier'>_root</span></span>(because that is &quot;where the code is&quot;), and if you include <spanclass=code><span style='font-family:Courier'>this</span></span>, <i>count </i>willbe created on the timeline <span class=code><span style='font-family:Courier'>_root.myClip</span></span>(because that is the scope of the event handler).</p><h3>Using this as a general reference to an object</h3><p class=MsoBodyText><span class=importantword><span style='font-family:Helvetica'>Notefor beginners ­</span></span> This discussion is fairly complex and requires agood understanding of the previous section as well as Object Oriented andModular programming concepts. Don't worry if it doesn't sink in first time!</p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText><span class=importantword><span style='font-family:Helvetica'>Notefor advanced users ­</span></span> Using <span class=code><spanstyle='font-family:Courier'>this</span></span> as a general reference isactually really the <i>only</i> way to use it (given that timelines themselvesare objects as well; they are movie clips). We have artificially separated theuse of <span class=code><span style='font-family:Courier'>this</span></span>when used with movie clips and put that discussion in the previous sectionsbecause movie clips are graphic objects, making them a special case in practice(and because gives the beginner a lead up to this section).</p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText>When using <span class=code><span style='font-family:Courier'>this</span></span>as a general reference, you are applying the current function, event handler,constructor, or prototype to a general object, and that object is the one thatis being currently scoped. This is a fundamental concept in advanced coding,and allows you to write modular and general code.</p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText>We will look at the four separate uses below, although asyou will see, they are essentially the same thing.</p><h4><span lang=EN-US style='mso-ansi-language:EN-US'>Using this in functions</span></h4><p class=MsoBodyText>You can use the new <span class=code><spanstyle='font-family:Courier'>Function</span></span> object to define generalfunctions, and then apply them to specific objects. Have a look at thefollowing example (<a href="../fla/this.fla">this.fla</a> and <ahref="../swf/this.swf">this.swf</a> )<i>.</i> This FLA creates a setof functions, and then applies them to a set of movie clips.</p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText>The FLA code is split into two main parts; defining thefunctions and applying them to objects (in this case the objects must be movieclips for reasons we will see when we come to looking at the prototype).</p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText>The first part looks like this:</p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>mover =function () {</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;&nbsp;this.init = function() {</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this._x = 275;</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this._y = 200;</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.speedX = Math.random()*9+1;</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.speedY = Math.random()*9+1;</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;&nbsp;};</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;&nbsp;this.move = function() {</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this._x += this.speedX;</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this._y += this.speedY;</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ((this._x&lt;0) || (this._x&gt;550)) {</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.speedX = -this.speedX;</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ((this._y&lt;0) || (this._y&gt;400)) {</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.speedY = -this.speedY;</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;&nbsp;};</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>};</span></span></p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText><span class=code>This code defines a function called </span><spanclass=code><span style='font-family:Courier'>mover</span> and creates functions</span><span class=code><span style='font-family:Courier'>init</span>and </span><spanclass=code><span style='font-family:Courier'>move</span>within it. To make thiscode general, we have done a number of things we would not have to do withnormal functions:</span></p><p class=MsoBodyText><span class=code>&nbsp;</span></p><p class=bullet-level1><span lang=EN-US style='font-family:Symbol;mso-ansi-language:EN-US'>·</span><span lang=EN-US style='font-size:7.0pt;mso-ansi-language:EN-US'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span lang=EN-US style='mso-ansi-language:EN-US'>We have embedded the </span><spanclass=code><span lang=EN-US style='font-family:Courier;mso-ansi-language:EN-US'>init</span></span><spanlang=EN-US style='mso-ansi-language:EN-US'>and </span><span class=code><spanlang=EN-US style='font-family:Courier;mso-ansi-language:EN-US'>move</span></span><spanlang=EN-US style='mso-ansi-language:EN-US'>functions within a larger function </span><spanclass=code><span lang=EN-US style='font-family:Courier;mso-ansi-language:EN-US'>mover</span></span><i><spanlang=EN-US style='mso-ansi-language:EN-US'>. </span></i><span lang=EN-USstyle='mso-ansi-language:EN-US'>The reason for this is as follows; we will betreating the functions as </span><span class=code><span lang=EN-USstyle='font-family:Courier;mso-ansi-language:EN-US'>Function</span></span><spanlang=EN-US style='mso-ansi-language:EN-US'> objects, and if we treated them astwo separate functions </span><span class=code><span lang=EN-USstyle='font-family:Courier;mso-ansi-language:EN-US'>init</span></span><spanlang=EN-US style='mso-ansi-language:EN-US'>and </span><span class=code><spanlang=EN-US style='font-family:Courier;mso-ansi-language:EN-US'>move</span></span><spanlang=EN-US style='mso-ansi-language:EN-US'>,we would have to apply two functionslater on. By placing them inside a &quot;wrapper function&quot; (</span><spanclass=code><span lang=EN-US style='font-family:Courier;mso-ansi-language:EN-US'>mover</span></span><spanlang=EN-US style='mso-ansi-language:EN-US'>)we can effectively treat them as ifthey are a <i>single </i>object. A side effect of this policy is that thefunction object starts to look like a <i>prototype. </i>We will use the sameexample later as an Object Oriented solution to show how far this similarityextends (and the important differences).</span></p><p class=MsoBodyText><span lang=EN-US style='mso-ansi-language:EN-US'>&nbsp;</span></p><p class=bullet-level1><span lang=EN-US style='font-family:Symbol;mso-ansi-language:EN-US'>·</span><span lang=EN-US style='font-size:7.0pt;mso-ansi-language:EN-US'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span lang=EN-US style='mso-ansi-language:EN-US'>We have used thegeneral function definition syntax:<br><br></span><span class=code><span lang=EN-US style='font-family:Courier;mso-ansi-language:EN-US'>this.functionName = function(){</span></span><span lang=EN-USstyle='font-family:Courier;mso-ansi-language:EN-US'><br><span class=code>// function code</span><br><span class=code>}</span></span><span lang=EN-US style='mso-ansi-language:EN-US'><br>rather than the normal function definition syntax:<br><br></span><span class=code><span lang=EN-US style='font-family:Courier;mso-ansi-language:EN-US'>function functionName(){</span></span><span lang=EN-US style='font-family:Courier;mso-ansi-language:EN-US'><br><span class=code>// function code</span><br><span class=code>}</span></span><span lang=EN-US style='mso-ansi-language:EN-US'><br><br>Why? Well, in the first syntax <i>we can specify where the function will residevia the </i></span><span class=code><span lang=EN-US style='font-family:Courier;mso-ansi-language:EN-US'>this</span></span><i><span lang=EN-USstyle='mso-ansi-language:EN-US'> path. </span></i><span lang=EN-USstyle='mso-ansi-language:EN-US'>You cannot do that with the more normalfunction definition, and cannot therefore create truly general code (becauseyou cannot assign the function to a general location or timeline).</span></p><p class=MsoBodyText style='margin-left:36.0pt'>&nbsp;</p><p class=MsoBodyText>The second section immediately follows the functiondefinition:</p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>for(i=0; i&lt;100; i++) {</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;&nbsp;name = &quot;ball&quot;+i</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;&nbsp;_root.attachMovie(&quot;ball&quot;, name, i);</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;&nbsp;mover.apply(_root[name]);</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;&nbsp;_root[name].init();</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;&nbsp;_root[name].onEnterFrame = _root[name].move;</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>}</span></span></p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText>Let's slow this down a little, and look at what isactually happening here. We have a loop that creates 100 movie clips (<spanclass=code><span style='font-family:Courier'>_root.ball0</span></span> to <spanclass=code><span style='font-family:Courier'>_root.ball99</span></span>). Theline that does this is below (see the entry for <span class=importantword><spanstyle='font-family:Helvetica'>MovieClip.attachMovie</span></span> for moredetails):</p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>_root.attachMovie(&quot;ball&quot;,name, i);</span></span></p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText>We then apply the <span class=code><span style='font-family:Courier'>mover</span></span>function to each of them as soon as they arecreated:</p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>mover.apply(_root[name]);</span></span></p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText>This shows the practical advantage of the &quot;<spanclass=code><span style='font-family:Courier'>mover</span></span>function as awrapper&quot; argument earlier. Without a wrapper function, we would have hadto apply each function separately:</p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>init.apply(_root[name]);</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>move.apply(_root[name]);</span></span></p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText>Although we are only saving one line here, in the moreusual case, you will have several functions, and using a wrapper would save youproportionally more code lines.</p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText>As soon as we apply the <span class=code><spanstyle='font-family:Courier'>mover</span></span>function to the ball instances, <i>allof them gain a set of the functions on their timelines:</i></p><p class=MsoBodyText><i>&nbsp;</i></p>  <p class=MsoBodyText><img border=0 width=243 height=321 id="_x0000_i1027"src="../png/0586_dict11e_03.png"></p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText>Each ball instance has an <span class=code><spanstyle='font-family:Courier'>init</span></span>and a <span class=code><spanstyle='font-family:Courier'>move</span></span>function on its timeline.</p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText>Notice that the <span class=code><span style='font-family:Courier'>mover</span></span>wrapper function disappears. It is only a containerfunction we have used to modularize our code, but it doesn't actually affectanything else (such as performance) because it is discarded during the applyprocess. Ignore the <span class=code><span style='font-family:Courier'>onEnterFrame</span></span>that also appears for a moment (we will cover it almost immediately).</p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText>We can now start using these functions, and do so in thelast two lines of the loop:</p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>_root[name].init();</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>_root[name].onEnterFrame= _root[name].move;</span></span></p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText><span class=code>The first line initializes our data bycalling the function </span><span class=code><span style='font-family:Courier'>init</span>,and the second line makes </span><span class=code><span style='font-family:Courier'>move</span> the </span><span class=code><span style='font-family:Courier'>onEnterFrame</span>event handler for this movie clip. Advanced coders will realize we could haveplaced these two lines at the end of the wrapper function </span><spanclass=code><span style='font-family:Courier'>mover</span></span>,<spanclass=code>but this is a stylistic decision. We have left them outside becauseit keeps our functions more general.</span></p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText>You will notice that we have used <span class=code><spanstyle='font-family:Courier'>this</span></span> on two levels here:</p><p class=MsoBodyText>&nbsp;</p><p class=bullet-level1><span lang=EN-US style='font-family:Symbol;mso-ansi-language:EN-US'>·</span><span lang=EN-US style='font-size:7.0pt;mso-ansi-language:EN-US'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span lang=EN-US style='mso-ansi-language:EN-US'>We have created thefunctions such that they can be placed on a general timeline called &quot;</span><spanclass=code><span lang=EN-US style='font-family:Courier;mso-ansi-language:EN-US'>this</span></span><spanlang=EN-US style='mso-ansi-language:EN-US'>&quot;. This makes our <i>code </i>modular.</span></p><p class=bullet-level1><span lang=EN-US style='font-family:Symbol;mso-ansi-language:EN-US'>·</span><span lang=EN-US style='font-size:7.0pt;mso-ansi-language:EN-US'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span lang=EN-US style='mso-ansi-language:EN-US'>We have referenced ourvariables with &quot;</span><span class=code><span lang=EN-US style='font-family:Courier;mso-ansi-language:EN-US'>this</span></span><span lang=EN-USstyle='mso-ansi-language:EN-US'>&quot;. This makes our <i>data </i>general.</span></p><h4><span lang=EN-US style='mso-ansi-language:EN-US'>Using this in eventhandlers</span></h4><p class=MsoBodyText>When using <span class=code><span style='font-family:Courier'>this</span></span>in an event handler, you allow the handler to be re-used, making it bothgeneral and modular. Consider the following function:</p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>functionmover() {</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;&nbsp;this._x += 10;</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>}</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>myClip.onEnterFrame= mover;</span></span></p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText>This Flash 6 code makes the function <span class=code><spanstyle='font-family:Courier'>mover</span></span>the <span class=code><spanstyle='font-family:Courier'>onEnterFrame</span></span> event handler of themovie clip <span class=code><span style='font-family:Courier'>myClip</span></span><i>.</i>Because you are using <span class=code><span style='font-family:Courier'>this</span></span>,the <span class=code><span style='font-family:Courier'>mover</span></span>functioncan be used for any other movie clip. You could for example add the followingline:</p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>myOtherClip.onEnterFrame= mover;</span></span></p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText>Here, we are using the <span class=code><spanstyle='font-family:Courier'>mover</span></span>function as the <spanclass=code><span style='font-family:Courier'>onEnterFrame</span></span> scriptfor another movie clip as well as <span class=code><span style='font-family:Courier'>myClip</span></span><i>.</i></p><h4><span lang=EN-US style='mso-ansi-language:EN-US'>Using this in constructorfunctions</span></h4><p class=MsoBodyText>Assuming we wanted to create an object that described acar, and wanted to include properties of <span class=code><spanstyle='font-family:Courier'>manufacturor</span></span>,<span class=code><spanstyle='font-family:Courier'>model</span></span>,<span class=code><spanstyle='font-family:Courier'>color</span></span>,and <span class=code><spanstyle='font-family:Courier'>price</span></span><i>. </i>We <i>could </i>do itthe long way round which would be:</p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>vehicle1= new Object();</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>vehicle1.manufacturer= &quot;Toyota&quot;;</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>vehicle1.model= &quot;4Runner&quot;;</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>vehicle1.color= &quot;Red&quot;;</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>vehicle1.price= 45000;</span></span></p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText>You can shorten this slightly by using the objectinitializer braces {}:</p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>vehicle1= {manufacturer:&quot;Toyota&quot;, model:&quot;4Runner&quot;, color:&quot;Red&quot;,price:45000};</span></span></p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText>This will produce the following object:</p><p class=MsoBodyText>&nbsp;</p>  <p class=MsoBodyText><img border=0 width=219 height=98 id="_x0000_i1028"src="../png/0586_dict11e_03a.png"></p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText>This is all fine if we want to create only one suchobject, but if we want to create 50 of them, it can get a little intense. Nowfor the better way, using a constructor. First, we create the constructorfunction:</p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>functionCar ( manufacturer, model, color, price) {</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.manufacturer = maufacturer;</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.model = model;</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.color = color;</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.price = price;</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>}</span></span></p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText>This creates a new function called <span class=code><spanstyle='font-family:Courier'>Car</span></span> that has four properties. Tocreate objects of the <span class=code><span style='font-family:Courier'>Car</span></span>type and set their values, you would write:</p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText>vehicle1 = new Car (&quot;Toyota&quot;,&quot;4Runner&quot;, &quot;Red&quot;, 45000);</p><p class=MsoBodyText>vehicle2 = new Car (&quot;Chevrolet&quot;,&quot;Corvette&quot;, &quot;Black&quot;, 65000);</p><p class=MsoBodyText>vehicle3 = new Car (&quot;Mazda&quot;, &quot;RX7&quot;,&quot;Silver&quot;, 25000);</p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText>Notice how we use <span class=code><span style='font-family:Courier'>this</span></span> to reference the currently scoped <span class=code><spanstyle='font-family:Courier'>Car</span></span> object; the constructor takes <spanclass=code><span style='font-family:Courier'>this</span></span> to mean&quot;the object that is currently being created&quot;.</p><h4><span lang=EN-US style='mso-ansi-language:EN-US'>Using this in prototypes</span></h4><p class=MsoBodyText>A prototype is really just another way of saying&quot;constructor&quot;, although in the Flash world the word&quot;prototype&quot; seems to have attained a certain amount of kudos as&quot;this is something that only very advanced coders use&quot;. That'sperhaps true in Flash 5, where the whole prototype chain and how to use it waslargely undocumented and tied in with the low level object inheritance property<span class=code><span style='font-family:Courier'>Object.__proto__</span></span>.In Flash 6, we now have the high level property <span class=code><spanstyle='font-family:Courier'>Object.prototype</span></span> (and its use isrecommended over the old <span class=code><span style='font-family:Courier'>__proto__</span></span>property). This is fully documented; so much of the mysticism in its use is nolonger relevant. The following code creates a new prototype called <spanclass=code><span style='font-family:Courier'>mover</span></span>and adds it tothe existing movie clip prototype. Notice the use of <span class=code><spanstyle='font-family:Courier'>this</span></span> to make the prototype definitiongeneral. The last 5 lines of this script create 100 instances of our new <spanclass=code><span style='font-family:Courier'>mover</span></span>object.</p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>mover =function () {</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;&nbsp;this.init = function() {</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this._x = 275;</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this._y = 200;</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.speedX = Math.random()*9+1;</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.speedY = Math.random()*9+1;</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;&nbsp;};</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;&nbsp;this.move = function() {</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this._x += this.speedX;</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this._y += this.speedY;</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ((this._x&lt;0) || (this._x&gt;550)) {</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.speedX = -this.speedX;</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ((this._y&lt;0) || (this._y&gt;400)) {</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.speedY = -this.speedY;</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;&nbsp;};</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;&nbsp;this.onLoad = this.init;</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;&nbsp;this.onEnterFrame = this.move;</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>};</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>mover.prototype= new MovieClip();</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>Object.registerClass(&quot;ball&quot;,mover);</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>for(i=0; i&lt;100; i++) {</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;&nbsp;_root.attachMovie(&quot;ball&quot;, &quot;ball&quot;+i, i);</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>}</span></span></p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText>Although the prototype definition looks a lot like thefunction based solution we looked at first, there are a number of subtledifferences. Almost all of these differences are advantages of the OOP routeover modular code based on functions:</p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText style='margin-left:53.25pt;text-indent:-18.0pt'><spanstyle='font-family:Symbol'>·</span><span style='font-size:7.0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>Notice that we have made <span class=code><span style='font-family:Courier'>init</span></span>the<span class=code><span style='font-family:Courier'>onLoad</span></span> event.We can do this using prototypes <i>because the prototype is defined before the </i><spanclass=code><span style='font-family:Courier'>onLoad</span></span><i> eventoccurs. </i>This is of course because the prototype is created before theobject it defines can come into existence<i>. </i>If we use a modular solution,the functions come into being <i>after </i>the movie clips are created, and sothe <span class=code><span style='font-family:Courier'>onLoad</span></span>event is missed.</p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText style='margin-left:53.25pt;text-indent:-18.0pt'><spanstyle='font-family:Symbol'>·</span><span style='font-size:7.0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>We have added the functions via object inheritence rather than justattaching them to the timeline of the movie clips. This means that ourfunctions become methods, and our variables are properties. The advantage ofthis is <i>that we can apply a prototype to an object that doesn't have atimeline. </i>We <i>cannot </i>do this with <span class=code><spanstyle='font-family:Courier'>function.apply</span></span> because functionscannot exist on anything other than a timeline, so you could not for exampleapply functions to a sound object, whereas you can apply functions to a soundobject as methods).</p><h3>Tips and precautions</h3><p class=filename>Probably the most important thing to be aware of when using <spanclass=code><span style='font-family:Courier'>this</span></span> is the scope.The scope of your code will determine what <span class=code><spanstyle='font-family:Courier'>this</span></span> points to, or references, orcontrols. Take for example the following code, the first section is the properuse of <span class=code><span style='font-family:Courier'>this</span></span>and the second section of code has had <span class=code><span style='font-family:Courier'>this</span></span> removed, wrongly. Put this in a Flash file to seethe result.</p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>moveByOne= function () {</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;&nbsp;this._x++;</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>}</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>testClip.onEnterFrame= moveByOne;</span></span></p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText>or</p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>moveByOne= function () {</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;&nbsp;_x++;</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>}</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>testClip.onEnterFrame= moveByOne;</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;</span></span></p><p class=MsoBodyText><span class=code>The first code block will move the </span><spanclass=code><span style='font-family:Courier'>testClip</span> movie by one pixelon each new frame, as intended. While with the second code block, because </span><spanclass=code><span style='font-family:Courier'>this</span> has been omitted, theentire _root timeline will move, as that is where the code resides.</span></p><p class=MsoBodyText><span class=code>&nbsp;</span></p><p class=MsoBodyText><span class=code>With Flash MX, you can now use the </span><spanclass=code><span style='font-family:Courier'>on</span> events on a movie clip.In all versions of Flash before MX, the </span><span class=code><spanstyle='font-family:Courier'>on</span> events were reserved for the buttonsymbol. In Flash MX, when </span><span class=code><span style='font-family:Courier'>this</span> is used in an </span><span class=code><spanstyle='font-family:Courier'>on</span> event on a movie clip, this refers to themovie clip itself. However, when this is used in an </span><span class=code><spanstyle='font-family:Courier'>on</span> event on a button, this refers to theparent timeline, the timeline in which the button resides. Take the followingcode, and apply it to both a movie clip and a button (make sure you give boththe movie clip and the button different instance names).</span></p><p class=MsoBodyText><span class=code>&nbsp;</span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>on(press){</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>&nbsp;&nbsp;trace(this);</span></span></p><p class=MsoBodyText><span class=code><span style='font-family:Courier'>}</span></span></p></div></body></html>