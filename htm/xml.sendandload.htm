<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"><link rel="stylesheet" href="desref.css" type="text/css"><h1><a name="_Toc15970105">XML.sendAndLoad</a></h1><p class=MsoBodyText><span class=Code><span style='font-family:Courier'>myXML.sendAndLoad(a, b);</span></span></p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText>Where <span class=Code><span style='font-family:Courier'>myXML</span></span>is an instance of the <span class=Code><span style='font-family:Courier'>XML</span></span>object, <span class=Code><span style='font-family:Courier'>a</span></span> isthe location (URL) to send the <span class=Code><span style='font-family:Courier'>XML</span></span>object instance to, and <span class=Code><span style='font-family:Courier'>b</span></span>is the name <span class=Code><span style='font-family:Courier'>XML</span></span>object instance which will receive returned data.</p><p class=MsoBodyText><span class=Code>&nbsp;</span></p><p class=MsoBodyText>Compatible with <span class=ImportantWord><spanstyle='font-family:Helvetica'>Flash 5 Player and above</span></span><spanclass=Code>.This method is </span><span class=ImportantWord><span style='font-family:Helvetica'>used to send data to a server, and then receive data back to theFlash movie</span></span>. I<span class=Code>t uses </span>HTTP <span class=Code>for transfer,and then stores the new data in a new instance of the </span><spanclass=Code><span style='font-family:Courier'>XML</span></span><span class=Code> object. Referto related entries on </span><span class=ImportantWord><spanstyle='font-family:Helvetica'>XML.send</span></span><span class=Code><b>, </b></span><span class=ImportantWord><spanstyle='font-family:Helvetica'>XML.load</span></span>, <spanclass=ImportantWord><span style='font-family:Helvetica'>XML.loaded</span></span>,<span class=ImportantWord><span style='font-family:Helvetica'>XML.onLoad</span></span>,<span class=ImportantWord><span style='font-family:Helvetica'>XML.getBytesLoaded</span></span>,<span class=Code>and</span><spanclass=ImportantWord><span style='font-family:Helvetica'>XML.getBytesTotal</span></span><spanclass=Code><b>.</b></span></p><h3>Description</h3><p class=MsoBodyText>The <span class=Code><span style='font-family:Courier'>XML.sendAndLoad()</span></span><span class=ImportantWord><span style='font-family:Helvetica'>method</span></span>encodes the specified <span class=Code><span style='font-family:Courier'>XML</span></span>object instance into an XML document. This document is then sent to a specifiedURL for further processing. This URL is usually of a server-side script ormiddleware application which can handle XML data. Any returned data from theserver is placed in the second XML object instance specified as an argument. </p><p class=MsoBodyText>&nbsp;</p><table border=1 cellspacing=0 cellpadding=0 style='margin-left:14.2pt; border-collapse:collapse;border:none;'> <tr>  <td width=204 valign=top style='width:153.2pt;border-top:solid windowtext .5pt;  border-left:none;border-bottom:solid windowtext .5pt;border-right:none;  padding:0cm 5.4pt 0cm 5.4pt'>  <p class=MsoBodyText style='margin-left:0cm'><span class=ImportantWord><span  style='font-family:Helvetica'>&nbsp;</span></span></p>  <p class=MsoBodyText style='margin-left:0cm'><span class=ImportantWord><span  style='font-family:Helvetica'>Code</span></span></p>  <p class=MsoBodyText style='margin-left:0cm'>&nbsp;</p>  </td>  <td width=184 valign=top style='width:137.7pt;border-top:solid windowtext .5pt;  border-left:none;border-bottom:solid windowtext .5pt;border-right:none;  padding:0cm 5.4pt 0cm 5.4pt'>  <p class=MsoBodyText style='margin-left:0cm'><span class=ImportantWord><span  style='font-family:Helvetica'>&nbsp;</span></span></p>  <p class=MsoBodyText style='margin-left:0cm'><span class=ImportantWord><span  style='font-family:Helvetica'>Returned values</span></span></p>  <p class=MsoBodyText style='margin-left:0cm'>&nbsp;</p>  </td>  <td width=184 valign=top style='width:137.7pt;border-top:solid windowtext .5pt;  border-left:none;border-bottom:solid windowtext .5pt;border-right:none;  padding:0cm 5.4pt 0cm 5.4pt'>  <p class=MsoBodyText style='margin-left:0cm'><span class=ImportantWord><span  style='font-family:Helvetica'>&nbsp;</span></span></p>  <p class=MsoBodyText style='margin-left:0cm'><span class=ImportantWord><span  style='font-family:Helvetica'>Notes</span></span></p>  </td> </tr> <tr>  <td width=204 valign=top style='width:153.2pt;border:none;border-bottom:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>  <p class=MsoNormal style='margin-left:3.8pt;  text-autospace:none'><span class=Code><span style='font-family:Courier'>&nbsp;</span></span></p>  <p class=MsoNormal style='margin-left:3.8pt;  text-autospace:none'><span class=Code><span style='font-family:Courier'>target_xml  = new XML();</span></span></p>  <p class=MsoNormal style='margin-left:3.8pt;  text-autospace:none'><span class=Code><span style='font-family:Courier'>myXML_xml  = new XML(&quot;&lt;client&gt;&lt;username ID='201'&gt;bill&lt;/username&gt;&lt;/client&gt;&quot;);</span></span></p>  <p class=MsoNormal style='margin-left:3.8pt;  text-autospace:none'><span class=Code><span style='font-family:Courier'>myXML_xml.sendAndLoad(&quot;getclients.cfm&quot;,  target_XML);</span></span></p>  <p class=MsoNormal style='margin-left:3.8pt;  text-autospace:none'><span class=Code><span style='font-family:Courier'>target_XML.onLoad  = function () {</span></span></p>  <p class=MsoNormal style='margin-left:3.8pt;  text-autospace:none'><span class=Code><span style='font-family:Courier'>     trace(&quot;yay!&quot;);</span></span></p>  <p class=MsoNormal style='margin-left:3.8pt;  text-autospace:none'><span class=Code><span style='font-family:Courier'>};</span></span></p>  <p class=MsoBodyText style='margin-left:0cm'>&nbsp;</p>  </td>  <td width=184 valign=top style='width:137.7pt;border:none;border-bottom:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>  <p class=MsoBodyText style='margin-left:0cm'>&nbsp;</p>  <p class=MsoBodyText style='margin-left:0cm'>n/a</p>  </td>  <td width=184 valign=top style='width:137.7pt;border:none;border-bottom:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>  <p class=MsoBodyText style='margin-left:1.8pt'><span class=Code>&nbsp;</span></p>  <p class=MsoBodyText style='margin-left:1.8pt'><span class=Code>This sends  the </span><span class=Code><span style='font-family:Courier'>myXML_xml</span></span><span  class=Code> instance to the ColdFusion server. XML data is sent back to the </span><span  class=Code><span style='font-family:Courier'>target_xml</span></span><span  class=Code> instance, and when it arrives, a trace is sent!</span></p>  <p class=MsoBodyText style='margin-left:1.8pt'>&nbsp;</p>  </td> </tr> <tr>  <td width=204 valign=top style='width:153.2pt;border:none;border-bottom:solid windowtext .5pt;background:#D9D9D9;padding:0cm 5.4pt 0cm 5.4pt'>  <p class=MsoNormal style='margin-left:3.8pt;  text-autospace:none'><span class=Code><span style='font-family:Courier'>&nbsp;</span></span></p>  <p class=MsoNormal style='margin-left:3.8pt;  text-autospace:none'><span class=Code><span style='font-family:Courier'>target_xml  = new XML();</span></span></p>  <p class=MsoNormal style='margin-left:3.8pt;  text-autospace:none'><span class=Code><span style='font-family:Courier'>myXML_xml  = new XML(&quot;&lt;client&gt;&lt;username  ID='201'&gt;bill&lt;/username&gt;&lt;/client&gt;&quot;);</span></span></p>  <p class=MsoNormal style='margin-left:3.8pt;  text-autospace:none'><span class=Code><b><span  style='font-family:Courier'>myXML_xml.sendAndLoad(&quot;getclients.html&quot;);</span></b></span></p>  <p class=MsoNormal style='margin-left:3.8pt;  text-autospace:none'><span class=Code><span style='font-family:Courier'>target_XML.onLoad  = function () {</span></span></p>  <p class=MsoNormal style='margin-left:3.8pt;  text-autospace:none'><span class=Code><span style='font-family:Courier'>     trace(&quot;yay!&quot;);</span></span></p>  <p class=MsoNormal style='margin-left:3.8pt;  text-autospace:none'><span class=Code><span style='font-family:Courier'>};</span></span></p>  <p class=MsoBodyText style='margin-left:0cm'>&nbsp;</p>  </td>  <td width=184 valign=top style='width:137.7pt;border:none;border-bottom:solid windowtext .5pt;background:#D9D9D9;padding:0cm 5.4pt 0cm 5.4pt'>  <p class=MsoBodyText style='margin-left:0cm'><span class=Code><span  style='font-family:Courier'>&nbsp;</span></span></p>  <p class=MsoBodyText style='margin-left:0cm'><span class=Code><span  style='font-family:Courier'>n/a</span></span></p>  </td>  <td width=184 valign=top style='width:137.7pt;border:none;border-bottom:solid windowtext .5pt;background:#D9D9D9;padding:0cm 5.4pt 0cm 5.4pt'>  <p class=MsoBodyText style='margin-left:0cm'>&nbsp;</p>  <p class=MsoBodyText style='margin-left:0cm'><span class=Code>You will want  to use a server-side script to handle your XML documents</span></p>  <p class=MsoBodyText style='margin-left:0cm'><span class=Code>&nbsp;</span></p>  <p class=MsoBodyText style='margin-left:0cm'><span class=Code>You should  also sepecify your new container XML instance to load the new data into.</span></p>  <p class=MsoBodyText style='margin-left:0cm'>&nbsp;</p>  </td> </tr></table><h3>Examples and practical uses</h3><p class=MsoBodyText>The <span class=Code><span style='font-family:Courier'>XML.sendAndLoad()</span></span>method is similar to the <span class=Code><span style='font-family:Courier'>XML.send()</span></span>method except data can be returned to the Flash movie. The <span class=Code><spanstyle='font-family:Courier'>XML.sendAndLoad()</span></span> method lets youencode an <span class=Code><span style='font-family:Courier'>XML</span></span>object as an XML document and send it to a server. Then, any return from theserver is placed in a new XML object. In the following example, we create a newXML instance to accept the returned data called <span class=Code><spanstyle='font-family:Courier'>mytarget_xml</span></span>. Then, we send new XMLto a server that can process XML data, in this case: ColdFusion MX. Then, itreturns XML data to the <span class=Code><span style='font-family:Courier'>mytarget_xml</span></span>.When the data is successfully loaded, it will be output as a string in the <spanclass=Code><span style='font-family:Courier'>textOutput</span></span> textfield:</p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText><span class=Code><span style='font-family:Courier'>mytarget_xml= new XML();</span></span></p><p class=MsoBodyText><span class=Code><span style='font-family:Courier'>myXML_xml= new XML(&quot;&lt;locationurl='http://www.macromedia.com/desdev/resources/macromedia_resources.xml'&gt;&quot;);</span></span></p><p class=MsoBodyText><span class=Code><span style='font-family:Courier'>myXML_xml.sendAndLoad(&quot;redirect.cfm&quot;,mytarget_xml);</span></span></p><p class=MsoBodyText><span class=Code><span style='font-family:Courier'>mytarget_xml.onLoad= function(status) {</span></span></p><p class=MsoBodyText><span class=Code><span style='font-family:Courier'>    if (status) {</span></span></p><p class=MsoBodyText><span class=Code><span style='font-family:Courier'>          _root.output.text =mytarget_xml.toString();</span></span></p><p class=MsoBodyText><span class=Code><span style='font-family:Courier'>    }</span></span></p><p class=MsoBodyText><span class=Code><span style='font-family:Courier'>};</span></span></p><p class=MsoBodyText><span class=Code><span style='font-family:Courier'>&nbsp;</span></span></p><p class=MsoBodyText><span class=Code>The above code can be found in the example </span><ahref="../fla/xml.sendandload.fla">xml.sendandload.fla</a> and <ahref="../swf/xml.sendandload.swf">xml.sendandload.swf</a>, which uses the <ahref="../swf/redirect.cfm">redirect.cfm</a> file, .</p><h3>Tips and precautions</h3><p class=MsoBodyText>The <span class=Code><span style='font-family:Courier'>XML.sendAndLoad()</span></span>method allows you to send XML documents to a file and place the return in an <spanclass=Code><span style='font-family:Courier'>XML</span></span> object. It isthe opposite of the <span class=Code><span style='font-family:Courier'>XML.load()</span></span>method. If you require very frequent small transfers of data, you might want tolook into using a socket server. See the entries for the <span class=Code><spanstyle='font-family:Courier'>XMLSocket</span></span>, or check out <i>Chapter 20</i>,which is dedicated to the subject.</p><p class=MsoBodyText>&nbsp;</p><p class=MsoBodyText>You should also note that this method must be attached toonly top-level <span class=Code><span style='font-family:Courier'>XML</span></span>class nodes.</p>